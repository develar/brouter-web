<!DOCTYPE HTML>
<html>
<head>
  <title>pixi.js example 1</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #000000;
    }
  </style>
  <script src="lib/pixi.dev.js"></script>
  <script src="out/VectorReader.js"></script>
</head>
<body>
<script>
  var bitmapFontLoader = new PIXI.BitmapFontLoader("10-bold.fnt");
  bitmapFontLoader.addEventListener("loaded", function () {
    drawTile();
  });
  bitmapFontLoader.load();

  function drawTile() {
    var url = "http://localhost:6090/19/278927/182093.v";
//    var url = "http://localhost:6090/18/139471/91081.v";

    var stage = new PIXI.Stage(0xF8F8F8);
//  var renderer = PIXI.autoDetectRenderer(256, 256, null, false, true);
    var renderer = new PIXI.CanvasRenderer(256, 256);
    document.body.appendChild(renderer.view);
    var request = new XMLHttpRequest();
    request.responseType = 'arraybuffer';
    request.onload = function () {
      var graphics = new PIXI.Graphics();
      var textContainer = new PIXI.DisplayObjectContainer();
      VectorReader.draw(request.response, graphics, textContainer, parseInt(url.substr("http://localhost:6090/".length, 2)));
      stage.addChild(graphics);
      stage.addChild(textContainer);
      renderer.render(stage);
    };
//  request.open("get", "http://localhost:6090/12/2185/1429.v?f=" + Math.random());
    request.open("get", url);
    request.send();
  }
</script>

</body>
</html>